using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ChessV1.Stormcloud.Chess.Stormcloud4
{
	internal class Magics
	{
		internal static ulong[] RookMagic_32bitCalc = {
			0x2080020500400f0UL,
			0x28444000400010UL,
			0x20000a1004100014UL,
			0x20010c090202006UL,
			0x8408008200810004UL,
			0x1746000808002UL,
			0x2200098000808201UL,
			0x12c0002080200041UL,
			0x104000208e480804UL,
			0x8084014008281008UL,
			0x4200810910500410UL,
			0x100014481c20400cUL,
			0x4014a4040020808UL,
			0x401002001010a4UL,
			0x202000500010001UL,
			0x8112808005810081UL,
			0x40902108802020UL,
			0x42002101008101UL,
			0x459442200810c202UL,
			0x81001103309808UL,
			0x8110000080102UL,
			0x8812806008080404UL,
			0x104020000800101UL,
			0x40a1048000028201UL,
			0x4100ba0000004081UL,
			0x44803a4003400109UL,
			0xa010a00000030443UL,
			0x91021a000100409UL,
			0x4201e8040880a012UL,
			0x22a000440201802UL,
			0x30890a72000204UL,
			0x10411402a0c482UL,
			0x40004841102088UL,
			0x40230000100040UL,
			0x40100010000a0488UL,
			0x1410100200050844UL,
			0x100090808508411UL,
			0x1410040024001142UL,
			0x8840018001214002UL,
			0x410201000098001UL,
			0x8400802120088848UL,
			0x2060080000021004UL,
			0x82101002000d0022UL,
			0x1001101001008241UL,
			0x9040411808040102UL,
			0x600800480009042UL,
			0x1a020000040205UL,
			0x4200404040505199UL,
			0x2020081040080080UL,
			0x40a3002000544108UL,
			0x4501100800148402UL,
			0x81440280100224UL,
			0x88008000000804UL,
			0x8084060000002812UL,
			0x1840201000108312UL,
			0x5080202000000141UL,
			0x1042a180880281UL,
			0x900802900c01040UL,
			0x8205104104120UL,
			0x9004220000440aUL,
			0x8029510200708UL,
			0x8008440100404241UL,
			0x2420001111000bdUL,
			0x4000882304000041UL,
		};

		internal static ulong[] RookMagic_64bitCalc = {
			0xa8002c000108020UL,
			0x6c00049b0002001UL,
			0x100200010090040UL,
			0x2480041000800801UL,
			0x280028004000800UL,
			0x900410008040022UL,
			0x280020001001080UL,
			0x2880002041000080UL,
			0xa000800080400034UL,
			0x4808020004000UL,
			0x2290802004801000UL,
			0x411000d00100020UL,
			0x402800800040080UL,
			0xb000401004208UL,
			0x2409000100040200UL,
			0x1002100004082UL,
			0x22878001e24000UL,
			0x1090810021004010UL,
			0x801030040200012UL,
			0x500808008001000UL,
			0xa08018014000880UL,
			0x8000808004000200UL,
			0x201008080010200UL,
			0x801020000441091UL,
			0x800080204005UL,
			0x1040200040100048UL,
			0x120200402082UL,
			0xd14880480100080UL,
			0x12040280080080UL,
			0x100040080020080UL,
			0x9020010080800200UL,
			0x813241200148449UL,
			0x491604001800080UL,
			0x100401000402001UL,
			0x4820010021001040UL,
			0x400402202000812UL,
			0x209009005000802UL,
			0x810800601800400UL,
			0x4301083214000150UL,
			0x204026458e001401UL,
			0x40204000808000UL,
			0x8001008040010020UL,
			0x8410820820420010UL,
			0x1003001000090020UL,
			0x804040008008080UL,
			0x12000810020004UL,
			0x1000100200040208UL,
			0x430000a044020001UL,
			0x280009023410300UL,
			0xe0100040002240UL,
			0x200100401700UL,
			0x2244100408008080UL,
			0x8000400801980UL,
			0x2000810040200UL,
			0x8010100228810400UL,
			0x2000009044210200UL,
			0x4080008040102101UL,
			0x40002080411d01UL,
			0x2005524060000901UL,
			0x502001008400422UL,
			0x489a000810200402UL,
			0x1004400080a13UL,
			0x4000011008020084UL,
			0x26002114058042UL,
		};


		internal static readonly ulong[] rook_magics_1 =
		{
			0x8080104000208000UL,		// size: 4096
			0x4040001000402000UL,		// size: 2048
			0x80200080100008UL,		// size: 2048
			0x2080041000080280UL,		// size: 2048
			0x1500080002110084UL,		// size: 2048
			0x600081042000401UL,		// size: 2048
			0x200020000a10458UL,		// size: 2048
			0x20001002040840aUL,		// size: 4096
			0x20800020804010UL,		// size: 2048
			0x6842402010024000UL,		// size: 1024
			0x100801000802000UL,		// size: 1024
			0x100100100200aUL,		// size: 1024
			0x80c0800400080080UL,		// size: 1024
			0x20800200040081UL,		// size: 1024
			0x1ac000110084402UL,		// size: 1024
			0x202000504104a82UL,		// size: 2048
			0x208000804010UL,		// size: 2048
			0x4040c000201002UL,		// size: 1024
			0x550008080102000UL,		// size: 1024
			0x2108090010002100UL,		// size: 1024
			0x8201010008001004UL,		// size: 1024
			0x8004008080020004UL,		// size: 1024
			0xc024040008820110UL,		// size: 1024
			0x8071020020410084UL,		// size: 2048
			0x2000400280248000UL,		// size: 2048
			0x9010084840002001UL,		// size: 1024
			0x4020008080201009UL,		// size: 1024
			0x18210100081004UL,		// size: 1024
			0x10280280240080UL,		// size: 1024
			0xc02000200080410UL,		// size: 1024
			0x2302000200040801UL,		// size: 1024
			0x690004200040091UL,		// size: 2048
			0x8003e008400444UL,		// size: 2048
			0x2280201000400040UL,		// size: 1024
			0x22001042002080UL,		// size: 1024
			0x81001002102UL,		// size: 1024
			0x4028004200400400UL,		// size: 1024
			0x800020080800400UL,		// size: 1024
			0x42000806000411UL,		// size: 1024
			0x200470200228cUL,		// size: 2048
			0x6280804000208002UL,		// size: 2048
			0x210408201020020UL,		// size: 1024
			0x20001108410021UL,		// size: 1024
			0x8000100008008080UL,		// size: 1024
			0x4001008010100UL,		// size: 1024
			0x1048c44020280110UL,		// size: 1024
			0x2005023088040011UL,		// size: 1024
			0x8053000943850002UL,		// size: 2048
			0x421101a8804200UL,		// size: 2048
			0xc0008040200480UL,		// size: 1024
			0x4a04051820600UL,		// size: 1024
			0x200c10010100UL,		// size: 1024
			0x8000400420040UL,		// size: 1024
			0x220040080020080UL,		// size: 1024
			0x280301142088400UL,		// size: 1024
			0x8001000080420100UL,		// size: 2048
			0x5210880021041UL,		// size: 4096
			0x8500130422004182UL,		// size: 2048
			0x20a4114009002001UL,		// size: 2048
			0x6425002084100009UL,		// size: 2048
			0x2002008041002UL,		// size: 2048
			0x40d000804000281UL,		// size: 2048
			0x440021000882104UL,		// size: 2048
			0x20010221488406UL,		// size: 4096
		};

		internal static readonly ulong[] rook_magics_2 = {
			0x80012640009080UL,		// size: 4096
			0x40180000180000UL,		// size: 384
			0x1030021c20000000UL,		// size: 512
			0x40015a100040aUL,		// size: 272
			0x240024a00c2UL,		// size: 48
			0x5400081000740230UL,		// size: 424
			0x600400084000d0a0UL,		// size: 608
			0x20000049000080a0UL,		// size: 128
			0x8a03000120500080UL,		// size: 960
			0x1006002041020080UL,		// size: 1024
			0x80c0001105c00008UL,		// size: 20
			0x8038000180041c08UL,		// size: 88
			0x8001000008008000UL,		// size: 192
			0x2010080020000820UL,		// size: 192
			0xf001000000000005UL,		// size: 64
			0x62a2010140040000UL,		// size: 512
			0x28000c0004000208UL,		// size: 128
			0x2200400ab0a00UL,		// size: 440
			0x43010016402000UL,		// size: 1024
			0x1202100010400002UL,		// size: 32
			0x200108408108UL,		// size: 231
			0x80600001009000UL,		// size: 32
			0x821c02004000001UL,		// size: 144
			0x26022c00000118UL,		// size: 488
			0x4511000100400000UL,		// size: 400
			0xc001800210030UL,		// size: 128
			0x2080000040UL,		// size: 128
			0x1100a00220140UL,		// size: 1024
			0x2040000042040800UL,		// size: 256
			0x4080481000002041UL,		// size: 128
			0x1080000800002014UL,		// size: 128
			0x80000803040800UL,		// size: 438
			0x1200044002400002UL,		// size: 384
			0x8104000008300800UL,		// size: 256
			0x49200000041004UL,		// size: 128
			0x4040100100000UL,		// size: 256
			0x800400800800UL,		// size: 1024
			0x100000808004000UL,		// size: 96
			0x8000000004000010UL,		// size: 128
			0x20280040900000UL,		// size: 512
			0x800000a000c0840UL,		// size: 432
			0xa044080122004044UL,		// size: 768
			0x110090000002000UL,		// size: 256
			0x60009000008000UL,		// size: 128
			0x4216808000082000UL,		// size: 192
			0x4406008004008100UL,		// size: 1024
			0x1000000020805UL,		// size: 256
			0x800500000013000UL,		// size: 256
			0x8102000000162028UL,		// size: 384
			0x1080204000004080UL,		// size: 512
			0x40002000029090UL,		// size: 256
			0x800008a40UL,		// size: 256
			0x201001004000020UL,		// size: 208
			0x6024000088490008UL,		// size: 160
			0x2000420130181400UL,		// size: 1024
			0x16200UL,		// size: 256
			0x100040005140011UL,		// size: 464
			0x2128001024008110UL,		// size: 256
			0x824c31c02c8100UL,		// size: 64
			0x880000040210008UL,		// size: 128
			0x4042008413060000UL,		// size: 32
			0x140000000081002UL,		// size: 256
			0xdb80e400000010cUL,		// size: 256
			0x120008104244402UL,		// size: 4096
			};
	}
}


/* Magics (64bit)
const uint64 RMagic[64] = {
  0xa8002c000108020ULL,
  0x6c00049b0002001ULL,
  0x100200010090040ULL,
  0x2480041000800801ULL,
  0x280028004000800ULL,
  0x900410008040022ULL,
  0x280020001001080ULL,
  0x2880002041000080ULL,
  0xa000800080400034ULL,
  0x4808020004000ULL,
  0x2290802004801000ULL,
  0x411000d00100020ULL,
  0x402800800040080ULL,
  0xb000401004208ULL,
  0x2409000100040200ULL,
  0x1002100004082ULL,
  0x22878001e24000ULL,
  0x1090810021004010ULL,
  0x801030040200012ULL,
  0x500808008001000ULL,
  0xa08018014000880ULL,
  0x8000808004000200ULL,
  0x201008080010200ULL,
  0x801020000441091ULL,
  0x800080204005ULL,
  0x1040200040100048ULL,
  0x120200402082ULL,
  0xd14880480100080ULL,
  0x12040280080080ULL,
  0x100040080020080ULL,
  0x9020010080800200ULL,
  0x813241200148449ULL,
  0x491604001800080ULL,
  0x100401000402001ULL,
  0x4820010021001040ULL,
  0x400402202000812ULL,
  0x209009005000802ULL,
  0x810800601800400ULL,
  0x4301083214000150ULL,
  0x204026458e001401ULL,
  0x40204000808000ULL,
  0x8001008040010020ULL,
  0x8410820820420010ULL,
  0x1003001000090020ULL,
  0x804040008008080ULL,
  0x12000810020004ULL,
  0x1000100200040208ULL,
  0x430000a044020001ULL,
  0x280009023410300ULL,
  0xe0100040002240ULL,
  0x200100401700ULL,
  0x2244100408008080ULL,
  0x8000400801980ULL,
  0x2000810040200ULL,
  0x8010100228810400ULL,
  0x2000009044210200ULL,
  0x4080008040102101ULL,
  0x40002080411d01ULL,
  0x2005524060000901ULL,
  0x502001008400422ULL,
  0x489a000810200402ULL,
  0x1004400080a13ULL,
  0x4000011008020084ULL,
  0x26002114058042ULL,
};

const uint64 BMagic[64] = {
  0x89a1121896040240ULL,
  0x2004844802002010ULL,
  0x2068080051921000ULL,
  0x62880a0220200808ULL,
  0x4042004000000ULL,
  0x100822020200011ULL,
  0xc00444222012000aULL,
  0x28808801216001ULL,
  0x400492088408100ULL,
  0x201c401040c0084ULL,
  0x840800910a0010ULL,
  0x82080240060ULL,
  0x2000840504006000ULL,
  0x30010c4108405004ULL,
  0x1008005410080802ULL,
  0x8144042209100900ULL,
  0x208081020014400ULL,
  0x4800201208ca00ULL,
  0xf18140408012008ULL,
  0x1004002802102001ULL,
  0x841000820080811ULL,
  0x40200200a42008ULL,
  0x800054042000ULL,
  0x88010400410c9000ULL,
  0x520040470104290ULL,
  0x1004040051500081ULL,
  0x2002081833080021ULL,
  0x400c00c010142ULL,
  0x941408200c002000ULL,
  0x658810000806011ULL,
  0x188071040440a00ULL,
  0x4800404002011c00ULL,
  0x104442040404200ULL,
  0x511080202091021ULL,
  0x4022401120400ULL,
  0x80c0040400080120ULL,
  0x8040010040820802ULL,
  0x480810700020090ULL,
  0x102008e00040242ULL,
  0x809005202050100ULL,
  0x8002024220104080ULL,
  0x431008804142000ULL,
  0x19001802081400ULL,
  0x200014208040080ULL,
  0x3308082008200100ULL,
  0x41010500040c020ULL,
  0x4012020c04210308ULL,
  0x208220a202004080ULL,
  0x111040120082000ULL,
  0x6803040141280a00ULL,
  0x2101004202410000ULL,
  0x8200000041108022ULL,
  0x21082088000ULL,
  0x2410204010040ULL,
  0x40100400809000ULL,
  0x822088220820214ULL,
  0x40808090012004ULL,
  0x910224040218c9ULL,
  0x402814422015008ULL,
  0x90014004842410ULL,
  0x1000042304105ULL,
  0x10008830412a00ULL,
  0x2520081090008908ULL,
  0x40102000a0a60140ULL,
};
//*/

// 64 bit run:
/*
 *
 *Testing all 64 magics.
[Field a8 | 0] Best Size: 4096, Best Magic [0]: 756607761056301088  |  101010000000000000101100000000000000000100001000000000100000
[Field b8 | 8] Best Size: -1, Best Magic [-1]: 0  |  0
[Field c8 | 16] Best Size: -1, Best Magic [-1]: 0  |  0
[Field d8 | 24] Best Size: -1, Best Magic [-1]: 0  |  0
[Field e8 | 32] Best Size: -1, Best Magic [-1]: 0  |  0
[Field f8 | 40] Best Size: -1, Best Magic [-1]: 0  |  0
[Field g8 | 48] Best Size: -1, Best Magic [-1]: 0  |  0
[Field h8 | 56] Best Size: 4096, Best Magic [7]: 2918332697065554048  |  10100010000000000000000010000001000001000000000000000010000000
[Field a7 | 1] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b7 | 9] Best Size: 1024, Best Magic [9]: 1267187687899136  |  100100000001000000000100000000000000100000000000000
[Field c7 | 17] Best Size: 1024, Best Magic [10]: 2490631468938694656  |  10001010010000100000000010000000000100100000000001000000000000
[Field d7 | 25] Best Size: 1024, Best Magic [11]: 293015506591416352  |  10000010001000000000000110100000000000100000000000000100000
[Field e7 | 33] Best Size: 1024, Best Magic [12]: 288934097953489024  |  10000000010100000000000100000000000000001000000000010000000
[Field f7 | 41] Best Size: 1024, Best Magic [13]: 3096241940480520  |  1011000000000000010000000001000000000100001000001000
[Field g7 | 49] Best Size: 1024, Best Magic [14]: 2596606664451031552  |  10010000001001000000000000000100000000000001000000001000000000
[Field h7 | 57] Best Size: -1, Best Magic [-1]: 0  |  0
[Field a6 | 2] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b6 | 10] Best Size: 1024, Best Magic [9]: 1267187687899136  |  100100000001000000000100000000000000100000000000000
[Field c6 | 18] Best Size: 1024, Best Magic [18]: 576745526890856466  |  100000000001000000110000000001000000001000000000000000010010
[Field d6 | 26] Best Size: 1024, Best Magic [19]: 360429257568030720  |  10100000000100000001000000000001000000000000001000000000000
[Field e6 | 34] Best Size: 1024, Best Magic [20]: 722829389795952768  |  101000001000000000011000000000010100000000000000100010000000
[Field f6 | 42] Best Size: 1024, Best Magic [21]: 9223513324166054400  |  1000000000000000100000001000000000000100000000000000001000000000
[Field g6 | 50] Best Size: 1024, Best Magic [22]: 144397214955930112  |  1000000001000000001000000010000000000000010000001000000000
[Field h6 | 58] Best Size: 2048, Best Magic [23]: 576744426307850385  |  100000000001000000100000000000000000010001000001000010010001
[Field a5 | 3] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b5 | 11] Best Size: 1024, Best Magic [25]: 1170971088563208264  |  1000001000000001000000000000001000000000100000000000001001000
[Field c5 | 19] Best Size: 1024, Best Magic [26]: 19799803437186  |  100100000001000000000010000000010000010000010
[Field d5 | 27] Best Size: 1024, Best Magic [11]: 293015506591416352  |  10000010001000000000000110100000000000100000000000000100000
[Field e5 | 35] Best Size: 1024, Best Magic [28]: 5070958365245568  |  10010000001000000001010000000000010000000000010000000
[Field f5 | 43] Best Size: 1024, Best Magic [29]: 72061994232053888  |  100000000000001000000000010000000000000100000000010000000
[Field g5 | 51] Best Size: 1024, Best Magic [14]: 2596606664451031552  |  10010000001001000000000000000100000000000001000000001000000000
[Field h5 | 59] Best Size: -1, Best Magic [-1]: 0  |  0
[Field a4 | 4] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b4 | 12] Best Size: 1024, Best Magic [33]: 72128031505784833  |  100000000010000000001000000000000010000000010000000000001
[Field c4 | 20] Best Size: 1024, Best Magic [10]: 2490631468938694656  |  10001010010000100000000010000000000100100000000001000000000000
[Field d4 | 28] Best Size: 1024, Best Magic [35]: 288300890958333970  |  10000000000010000000010001000000010000000000000100000010010
[Field e4 | 36] Best Size: 1024, Best Magic [36]: 146649081425430530  |  1000001001000000001001000000000101000000000000100000000010
[Field f4 | 44] Best Size: 1024, Best Magic [13]: 3096241940480520  |  1011000000000000010000000001000000000100001000001000
[Field g4 | 52] Best Size: 1024, Best Magic [38]: 4828149286694814032  |  100001100000001000010000011001000010100000000000000000101010000
[Field h4 | 60] Best Size: 2048, Best Magic [39]: 2323899487900144641  |  10000001000000001001100100010110001110000000000001010000000001
[Field a3 | 5] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b3 | 13] Best Size: 1024, Best Magic [41]: 9223654062661107744  |  1000000000000001000000001000000001000000000000010000000000100000
[Field c3 | 21] Best Size: 1024, Best Magic [42]: 9516248984046403600  |  1000010000010000100000100000100000100000010000100000000000010000
[Field d3 | 29] Best Size: 1024, Best Magic [43]: 1153765998257045536  |  1000000000011000000000001000000000000000010010000000000100000
[Field e3 | 37] Best Size: 1024, Best Magic [44]: 577591050391027840  |  100000000100000001000000000000001000000000001000000010000000
[Field f3 | 45] Best Size: 1024, Best Magic [45]: 5066584209096708  |  10010000000000000100000010000000000100000000000000100
[Field g3 | 53] Best Size: 1024, Best Magic [46]: 1152939105383088648  |  1000000000000000100000000001000000000000001000000001000001000
[Field h3 | 61] Best Size: 2048, Best Magic [47]: 4827859488876920833  |  100001100000000000000001010000001000100000000100000000000000001
[Field a2 | 6] Best Size: -1, Best Magic [-1]: 0  |  0
[Field b2 | 14] Best Size: 1024, Best Magic [49]: 63067988042981952  |  11100000000100000000000001000000000000000010001001000000
[Field c2 | 22] Best Size: 1024, Best Magic [50]: 35188671256320  |  1000000000000100000000010000000001011100000000
[Field d2 | 30] Best Size: 1024, Best Magic [27]: 942527774937055360  |  110100010100100010000000010010000000000100000000000010000000
[Field e2 | 38] Best Size: 1024, Best Magic [12]: 288934097953489024  |  10000000010100000000000100000000000000001000000000010000000
[Field f2 | 46] Best Size: 1024, Best Magic [29]: 72061994232053888  |  100000000000001000000000010000000000000100000000010000000
[Field g2 | 54] Best Size: 1024, Best Magic [54]: 9227893237937669120  |  1000000000010000000100000000001000101000100000010000010000000000
[Field h2 | 62] Best Size: 2048, Best Magic [55]: 2305843628831998464  |  10000000000000000000001001000001000100001000010000001000000000
[Field a1 | 7] Best Size: 4096, Best Magic [56]: 4647715366276964609  |  100000010000000000000001000000001000000000100000010000100000001
[Field b1 | 15] Best Size: -1, Best Magic [-1]: 0  |  0
[Field c1 | 23] Best Size: -1, Best Magic [-1]: 0  |  0
[Field d1 | 31] Best Size: -1, Best Magic [-1]: 0  |  0
[Field e1 | 39] Best Size: -1, Best Magic [-1]: 0  |  0
[Field f1 | 47] Best Size: -1, Best Magic [-1]: 0  |  0
[Field g1 | 55] Best Size: 2048, Best Magic [62]: 4611687186792841348  |  100000000000000000000010001000000001000000000100000000010000100
[Field h1 | 63] Best Size: 4096, Best Magic [63]: 10696191184830530  |  100110000000000010000100010100000001011000000001000010
Done.
Das Programm "[31832] ChessV1.exe" wurde mit Code 0 (0x0) beendet.

 *
 */